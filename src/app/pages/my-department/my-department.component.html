<div class="department-page">
  <header class="navbar">
    <div class="app-name" routerLink="/home">
      EduGuideAI
    </div>
    <div class="right-button">
      <li class="menu-container">
        <a routerLink="/profile" class="menu-trigger">
          <i class="fas fa-user-circle"></i> {{ student.firstName | titlecase }}
        </a>
      </li>
    </div>
  </header>

  <div class="navbar-spacer"></div>

  <!-- Department Selection Prompt -->
  <div *ngIf="!selectedDepartment">
    <label for="department-select">Select your Department:</label>
    <select id="department-select" (change)="onDepartmentChange($event)">
      <option value="CS">Computer Science (CS)</option>
      <option value="IS">Information Systems (IS)</option>
      <option value="AI">Artificial Intelligence (AI)</option>
      <option value="IT">Information Technology (IT)</option>
    </select>
  </div>

  <div class="department-manager">
    <h2>Available Departments</h2>
    <div class="tables-container">
      <div class="table-container">
        <h3>Core Departments</h3>
        <table class="department-table">
          <thead>
            <tr>
              <th>Code</th>
              <th>Department Name</th>
              <th>Head</th>
              <th>Location</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let course of coreCourses" [class.disabled]="!canTakeCourse(course)">
              <td>{{ course.code }}</td>
              <td>{{ course.name }}</td>
              <td>{{ course.hours }}</td>
              <td>{{ course.preRequest || 'None' }}</td>
              <td>
                <label for="core-course-grade-{{course.code}}">Grade for {{ course.name }}</label>
                <select
                  id="core-course-grade-{{course.code}}"
                  [(ngModel)]="course.grade"
                  [disabled]="!canTakeCourse(course)"
                  title="Select grade for {{ course.name }}"
                >
                  <option value="none">None</option>
                  <option value="A+">A+</option>
                  <option value="A">A</option>
                  <option value="B+">B+</option>
                  <option value="B">B</option>
                  <option value="C+">C+</option>
                  <option value="C">C</option>
                  <option value="D+">D+</option>
                  <option value="D">D</option>
                  <option value="F">F</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="table-container">
        <h3>Elective Departments</h3>
        <table class="department-table">
          <thead>
            <tr>
              <th>Code</th>
              <th>Department Name</th>
              <th>Head</th>
              <th>Location</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let course of electiveCourses" [class.disabled]="!canTakeCourse(course)">
              <td>{{ course.code }}</td>
              <td>{{ course.name }}</td>
              <td>{{ course.hours }}</td>
              <td>{{ course.preRequest || 'None' }}</td>
              <td>
                <label for="elective-course-grade-{{course.code}}">Grade for {{ course.name }}</label>
                <select
                  id="elective-course-grade-{{course.code}}"
                  [(ngModel)]="course.grade"
                  [disabled]="!canTakeCourse(course)"
                  title="Select grade for {{ course.name }}"
                >
                  <option value="none">None</option>
                  <option value="A+">A+</option>
                  <option value="A">A</option>
                  <option value="B+">B+</option>
                  <option value="B">B</option>
                  <option value="C+">C+</option>
                  <option value="C">C</option>
                  <option value="D+">D+</option>
                  <option value="D">D</option>
                  <option value="F">F</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="summary">
      <p>Total Hours: {{ calculateDepartmentHours() }}</p>
      <button (click)="submitCourses()">Submit</button>
    </div>
  </div>
</div>
